!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t._=e()}(this,function(){"use strict";function t(t,e,n){for(var i=0,r=t.length;i<r;i++)e.apply(n||t,[t[i],i,t]);return t}function e(e,n,i){var r=d.keys(e);return t(r,function(t,r){n.call(i||e,e[t],t,e)},i||e),e}function n(t){return decodeURIComponent(t.replace(/\+/g," "))}function i(t){return encodeURIComponent(t).replace(" ","%20")}function r(t){return g[t]||t}function o(t){return m[t]||t}function a(t){return"\\"+L[t]}var c="0.1",s=Object.prototype,u=(Array.prototype,Number.prototype,String.prototype,[]),l=u.slice,f=u.splice,h=function(){return this||(0,eval)("this")}(),d={};d.extend=function(t){var e=l.call(arguments);if(e.length>1)d.compose(t,e[1],e[2]);else for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return t},d.define=function(t,e,n){return d.isObject(e)?Object.defineProperties(t,e):Object.defineProperty(t,e,n)},d.isObject=function(t){return"function"==typeof t||"object"==typeof t&&!!t};var p=["Array","Arguments","Boolean","Function","String","Number","Null","Date","RegExp","NodeList","Undefined","HTMLCollection"];p.forEach(function(t,e){d["is"+t]=function(e){return s.toString.call(e)==="[object "+t+"]"}}),d.extend({NULL:function(){},cool:function(t){return t},root:h,broken:{},version:c,foreach:function(n,i,r){if(null!=n){if(d.isArray(n))return t(n,i,r);if(d.isObject(n)&&!d.isFunction(n))return e(n,i,r)}return n},keys:Object.keys,slice:function(t){return null!=t?l.call(t):[]},splice:function(t,e,n){return d.isArray(t)?f.call(t,e,n||1):delete t[e],t},clone:function(t){return d.isArray(t)?l.call(t):d.isObject(t)&&!d.isFunction(t)?JSON.parse(JSON.stringify(t)):t},clonedoom:function(t){if(d.isArray(t)||d.isArguments(t)||d.isNodeList(t)||d.isHTMLCollection(t))return l.call(t);if(d.isObject(t)&&!d.isFunction(t)){var e=function(){};e.prototype=t.constructor.prototype;var n=new e;return d.foreach(t,function(t,e){d.isString(t)||d.isNumber(t)?n[e]=t:n[e]=d.clonedoom(t)}),n}return t},sort:function(t,e){return d.isArray(t)?t.sort(e):t},unique:function(t){for(var e=t.length,n=0;n<e&&n!==t.length-1;n++)for(var i=n+1;i<t.length;i++)t[n]===t[i]&&t.splice(i--,1);return t},reject:function(t,e){var n=[];return d.foreach(d.clonedoom(t),function(t,i,r){e.call(r,t,i,r)||n.push(t)}),n},filter:function(t,e){var n=[];return d.foreach(d.clonedoom(t),function(t,i,r){e.call(r,t,i,r)&&n.push(t)}),n},map:function(t,e){return t.map(e)},find:function(t,e){return d.filter(t,e)},cat:function(t,e){var n=[];if(d.isArray(t))for(var i=t.length;i--;)e.call(t,t[i],i,t)&&n.push(t.splice(i,1)[0]);else if(d.isObject(t))for(var i in t)e.call(t,t[i],i,t)&&(n.push(t[i]),delete t[i]);return n},findindex:function(t,e){var n=[];return d.foreach(t,function(t,i,r){e.call(r,t,i,r)&&n.push(i)}),n},contain:function(t,e){return!!d.find(t,function(t){return t===e}).length},hook:function(t,e){var n=l.call(arguments,2),i=d.isFunction(e);return d.map(t,function(t){return(i?e:t[e]).apply(t,n)})},fnbind:function(t){Function.bind.apply(t,l.call(arguments,1))},bind:function(t){var e=l.call(arguments,1);return d.foreach(e,function(e,n){t[n]=d.fnbind(t[n],t)}),t},reverse:function(t){return d.isArray(t)?d.slice(t).reverse():t},pluck:function(t,e){var n=[];return d.foreach(t,function(t){for(var i=d.keys(t),r=i.length;r--;)i[r]===e+""&&n.push(t[i[r]])}),n},groupby:function(t,e){if(d.isArray(t)){var n={},i=d.isFunction(e);return d.foreach(t,function(t){var r=i?e(t):t[e];n[r]?n.hasOwnProperty(r)&&n[r].push(t):n[r]=[t]}),n}return t},toarray:function(t){for(var e=d.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},forarray:function(t){for(var e=d.keys(t),n=e.length,i=Array(n),r=0;r<n;r++){var o={};o[e[r]]=t[e[r]],i[r]=o}return i},pairs:function(t){for(var e=[],n=d.keys(t),i=0,r=n.length;i<r;i++)result.push([n[i],t[n[i]]]);return e},random:function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},compose:function(t,e,n){return n?d.foreach(e,function(e,i){var r=d.isArray(n)?!d.has(n,i):i!==n;r&&(t[i]=e)}):d.foreach(e,function(e,n){t[n]=e}),t},has:function(t,e){var n=0;return d.foreach(t,function(t){t===e&&(n=1)}),!!n},not:function(t,e){for(var n=0,i=t.length;n<i;n++)d.isequal(t[n],e)&&d.splice(t,n--);return t},bale:function(t,e){return d.isArray(t)&&d.isArray(e)?ba.contact(e):d.compose(d.clonedoom(t),d.clonedoom(e))},shuffle:function(t){for(var e,n=d.isArray(t)?t:d.toarray(t),i=n.length,r=Array(i),o=0;o<i;o++)e=d.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},trim:function(t){return t.replace(/^\s+|\s+$/gm,"")},merge:function(){var t=[],e=l.call(arguments);return e.forEach(function(e){t=t.concat(e)}),d.unique(t)},partial:function(t){var e=slice.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,o=i.length;r<o;r++)i[r]===d&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},before:function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},hack:function(t,e){var n=d.partial(d.before,(parseInt(e)||1)+1);return n(t)},once:function(t){return d.hack(t,1)},tostring:function(t){return s.toString.call(t)},isequal:function(t,e){if(t===e)return!0;if(d.isFunction(t)||d.isFunction(e))return t===e;if(d.tostring(t)===d.tostring(e)){if(d.isArray(t)){if(t.length===e.length){for(var n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}return!1}if(d.isObject(t)){var i=d.keys(t),r=d.keys(e);if(i.length===r.length){for(var n=i.length;n--;)if(t[i[n]]!==e[i[n]])return!1;return!0}return!1}if(d.isString(t)||d.isNumber(t))return t.toString()===e.toString()}return!1},typeof:function(t){var e,n=[d.isArray(t),d.isArguments(t),d.isBoolean(t),d.isFunction(t),d.isString(t),d.isNumber(t),d.isNull(t),d.isDate(t),d.isRegExp(t),d.isNodeList(t),d.isUndefined(t),d.isHTMLCollection(t)];return e=d.findindex(n,function(t){return t===!0}).shift(),null==e?"object":p[e].toLowerCase()},requery:function(t){var e={};return d.foreach(t,function(t){e[t.name]=t.value}),e},async:function(t,e){return setTimeout(t,e||0)},combom:function(t,e){for(var n,i=0,r=t.length;i<r;i++)if(e.call(t,t[i],i,t)){n=t[i];break}return n}});var v=/[\t\r\n\f\x20]/g;d.extend({paramparse:function(t){var e,i,r=t.indexOf("?"),o=/([^&=]+)=?([^&]*)/g,a={};for(e=r===-1?t:t.substr(r+1);i=o.exec(e);)a[n(i[1])]=n(i[2]);return a},paramstringify:function(t){var e=d.clone(t);for(var n in e)e[n]=i(d.isObject(e[n])||d.isArray(e[n])?JSON.stringify(e[n]):e[n]);var r=JSON.stringify(e);return r.replace(/[\"\{\}]/g,"").replace(/:/g,"=").replace(/,/g,"&").replace(v,"")},parseString:function(t){return d.isBoolean(t)?t:t+""}});var g={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"$quot;","'":"&#x27;","`":"&#x60"},m={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#x27;":"'","&#x60;":"`"},b="(.)^",y=/\\|'|\r|\n|\u2028|\u2029/g,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},x=d.doomSetting={escape:"{{-([\\s\\S]+?)}}",interpolate:"{{#([\\s\\S]+?)}}",evaluate:"{{([\\s\\S]+?)}}"};if(d.extend({encodeHTML:function(t){return+t===t?t:t.replace(/[&<">'](?:(amp|lt|quot|gt|#39);)?/g,r)},decodeHTML:function(t){return+t===t?t:t.replace(/&((g|l|quo)t|amp|#39);/g,o)},doom:function(t,e){var n=0,i="_p+='",r=RegExp((x.escape||b)+"|"+(x.interpolate||b)+"|"+(x.evaluate||b)+"|$","g");t.replace(r,function(e,r,o,c,s){return i+=t.slice(n,s).replace(y,a),n=s+e.length,r?i+="'+\n((_t=("+r+"))==null?'':_.encodeHTML(_t))+\n'":o?i+="'+\n((_t=("+o+"))==null?'':_t)+\n'":c&&(i+="';\n"+c+"\n_p+='"),e}),i+="';\n",e||(i="with(_x||{}){\n"+i+"}\n"),i="var _t,_p='',_j=Array.prototype.join,print=function(){_p+=_j.call(arguments,'');};\n"+i+"return _p;\n";try{var o=new Function(e||"_x","_",i)}catch(t){throw t.res=i,console.log(i),t}return function(t){return o.call(this,t,d)}}}),d.extend({watch:function(t,e,n){function i(){return a}function r(i){return o=a,a=n.call(t,i,o,e)}var o=t[e],a=o;return delete t[e]&&(Object.defineProperty?Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(t,e,i),Object.prototype.__defineSetter__.call(t,e,r))),t},unwatch:function(t,e){var n=t[e];return delete t[e],t[e]=n,t}}),d.extend({addEvent:function(t,e,n){return t._events||d.define(t,"_events",{value:{},writable:!0,enumerable:!1,configurable:!0}),t._events[e]||(t._events[e]=[]),d.has(t._events[e],n)||t._events[e].push(n),t},removeEvent:function(t,e,n){if(t._events[e])d.not(t._events[e],n),t._events[e].length&&n||delete t._events[e];else if(!e&&!n)return d.release(t);return t},release:function(t){return delete t._events,t},dispatch:function(t,e,n,i){var r=d.isFunction(n);return t._events&&t._events[e]&&(r?d.foreach(t._events[e],function(e){e===n&&e.apply(t,i||[])}):d.foreach(t._events[e],function(e){e.apply(t,i||[])})),t},trigger:function(t,e,n,i){return d.dispatch(t,e,n,i)}}),d.root.self){var w=function(t){this.info=t.userAgent,this.language=t.language,this.platform=t.platform};d.extend(w.prototype,{defineBroswer:function(t,e){var n=this.info;this.browser={};for(var i=t.length;i--;)e[i].call(n,d.root)?this.browser[t[i]]=!0:this.browser[t[i]]=!1;return this},definePlatform:function(t,e){var n=this.info;this.version={};for(var i=t.length;i--;)this.version[t[i]]=e[i].call(n,d.root);return this}});var E=new w(d.root.navigator).defineBroswer(["IE","Edge","Opera","Chrome","Safari","FireFox","Mobile","Desktop"],[function(){return/(Trident|MSIE)/i.test(this)},function(){return/Edge/i.test(this)&&/Webkit/i.test(this)},function(){return/Opera/i.test(this)&&/Webkit/i.test(this)},function(t){return null!=t.chrome},function(){return/Safari/i.test(this)&&!/Chrome/i.test(this)},function(t){return/Firefox/i.test(this)&&t.netscape&&/Gecko/.test(this)},function(t){return t.devicePixelRatio>1},function(t){return null==t.devicePixelRatio||1===t.devicePixelRatio}]).definePlatform(["OS","RenderEnginner","Chrome","Firefox","IE"],[function(t){return/Windows/gi.test(this)?"Windows":/(Linux|Ubuntu|CentOS|Debian|Arach|RedHat|FreeBSD|Unix)/gi.test(this)?"Linux":/Macintosh/gi.test(this)?"Mac OS X":/iOS|iPad|iPhone/gi.test(this)?"iOS":/Android/gi.test(this)?"Android":"UnKown"},function(t){return/(Webkit|Gecko|Trident)/gi.exec(this)[0]},function(t){return!!/Chrome/gi.test(this)&&this.match(/(Chrome)\/([\d\.]+)/gi)[0].replace(/[^\d\.]/gi,"")},function(t){return!!/Firefox/gi.test(this)&&/Firefox\/([\d\.]+)/gi.exec(this)[1]},function(t){return!!/IE/gi.test(this)&&parseInt(/MSIE\ ([\d\.]+)/gi.exec(this)[1])}]),S=0,N=d.root.localStorage;N.getItem("aixcache")||N.setItem("aixcache","{}");var _=/<(\/)?(\w+)\s?([^>]+?)?\>{1}/gi,O=function(t){var e={},n=t?t.split(" "):[];return d.foreach(n,function(t,n){var i=t.split("=");e[i[0]]=(i[1]||"").replace(/[\'\"]/gm,"")}),e};d.extend({domparse:function(t){var e=(t||"").replace(/[\t\r\n\f]/gm,"").replace(/<script\b[^>]*>(.*?)<\/script>/gi,""),n=1,i=1,r=[[{tagname:"_",html:e,$ob:0,$oe:e.length}]],o=[];e.replace(_,function(t,e,a,c,s){var u,l={};if("/"!==e){u=n++,null==r[u]&&(r[u]=[]);u-i++;d.compose(l,{tagname:a,attributes:O(d.trim(c||"")),$ob:s+t.length}),r[u].push(l),"input"===a?(--n,--i,l.$oe=0):o.push(l)}else{u=--n,--i;var f=o.pop();f.$oe=s-f.$ob}return t});for(var a=1,c=r.length;a<c;a++)for(var s=r[a],u=r[a+1],l=r[a-1],f=0,h=s.length;f<h;f++){var p=s[f].$ob,v=s[f].$oe;s[f].content=d.trim(e.substr(p,v)),s[f].child=u?d.filter(u,function(t){return t.$ob>p&&t.$ob+t.$oe<p+v}):[],s[f].parent=l?d.combom(l,function(t){return p>t.$ob&&p+v<t.$ob+t.$oe}):null}return r},cookieparse:function(t){var e,n={},i=t?t.split(";"):[];return i.forEach(function(t){e=(t||"").split("="),e.length&&(n[d.trim(e[0])]=d.trim(e[1]))}),n},cookie:function(t){var e=d.slice(arguments),n=e.length,i=d.cookieparse(d.root.document.cookie);if(n){if(1===n)return i[t];var r=new Date;return r.setDate(r.getDate()+365),d.root.document.cookie=d.trim(e[0]+"="+(e[1]||"")+";expires="+(e[2]||r.toGMTString())+";path="+(e[3]||"/")+";domain="+(e[4]||"")+";"+(e[5]?"secure":""))}return i},aix:function(t){var e=d.compose({url:"",type:"GET",param:d.broken,aysnc:!0,vaild:!0,cache:!1,success:d.NULL,fail:d.NULL,loading:null,loaded:null,header:d.broken,username:null,password:null,timeout:0},t||{});if(e.cache){var n=JSON.parse(N.getItem("aixcache")),i=e.url||d.root.location.href.split("#")[0];if(n[i])return e.success.call(d.root,n[i])}var r=new XMLHttpRequest;if("GET"===e.type.toUpperCase()&&e.param&&(e.url+=(e.url.search(/\?/g)===-1?d.keys(e.param).length?"?":"":"&")+d.paramstringify(e.param),e.param=null),d.isFunction(e.loading)){var o=function(t){e.loading.call(d.root,t)};r.addEventListener("loadstart",function(t){o(t),r.removeEventListener("loadstart",o),o=null})}if(d.isFunction(e.loaded)){var a=function(t){e.loaded.call(d.root,t)};r.addEventListener("loadend",function(t){a(t),r.removeEventListener("loadend",o),a=null})}return null!=e.username?r.open(e.type,e.url,e.aysnc,e.username,e.password||""):r.open(e.type,e.url,e.aysnc),"POST"===e.type&&e.param&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Aix-Requested","AixHttpRequest"),d.isObject(e.header)&&e.header!==d.broken&&d.foreach(e.header,function(t,e){r.setRequestHeader(e,t)}),r.onreadystatechange=function(t){if(4===r.readyState&&r.responseText){var n=r.status;if(n>=200&&n<300||304===n){if(e.success.call(d.root,r.responseText,r,t),e.cache){var i=JSON.parse(N.getItem("aixcache"));i[e.url||d.root.location.href.split("#")[0]]=r.responseText,N.setItem("aixcache",JSON.stringify(i))}}else e.fail.call(d.root,r,t)}},r.send(e.param?d.isObject(e.param)?d.paramstringify(e.param):e.param:null),S++,e.timeout&&d.async(function(){r.abort(),e.fail.call(d.root,r)},1e3*e.timeout||5e3),r},aixp:function(t){var e=d.compose({url:"",param:d.broken,key:"callback",fn:("jsonp"+Math.random()).replace(".",""),timeout:5,success:d.NULL,fail:d.NULL},t||{}),n=e.url+"?"+d.paramstringify(e.param)+(d.keys(e.param).length?"&":"")+e.key+"="+e.fn,i=d.root.document.createElement("script");i.src=n,d.root[e.fn]=function(t){clearTimeout(e.timesetup),d.root.document.body.removeChild(i),d.root[e.fn]=null,e.success.call(d.root,t)},d.root.document.body.append(i),e.timeout&&(e.timesetup=setTimeout(function(){d.root.document.body.removeChild(i),d.root[e.fn]=null,e.success.call(d.root)},1e3*e.timeout)),S++},pagepref:function(){var t=d.slice(document.getElementsByTagName("*")),e="",n={},i="",r={},o="",a="",c=d.slice(document.getElementsByTagName("img")),s=[],u=d.slice(document.getElementsByTagName("script")),l=function(t,e,n){t[n]?t[n].push(e):t[n]=[e]};d.foreach(t,function(t){var c=t.getAttribute("class");c&&(i+=" "+c,c=d.trim(c).split(" "),d.foreach(c,function(e){l(r,t,e)})),c=t.getAttribute("id"),c&&(e+=" "+c,c=d.trim(c),l(n,t,c)),c=d.root.getComputedStyle(t),c&&c.backgroundImage&&"none"!==c.backgroundImage.toLowerCase()&&(a+=" "+c.backgroundImage),c=t.getAttribute("href"),c&&(o+=" "+c)}),d.foreach(c,function(t){var e=t.getAttribute("src");e&&(a+=" "+e)}),d.foreach(u,function(t){var e=t.getAttribute("src");e&&s.push(e.split("/").pop().slice(0,-3))});var f=e.split(" ");f.shift(),f=d.unique(f);var h=i.split(" ");h.shift(),h=d.unique(h);var p=a.split(" ");p.shift(),p=d.unique(p);var g=o.split(" ");return g.shift(),g=d.unique(g),{_url:window.location.href,htmlsize:(document.body.innerHTML+document.head.innerHTML).replace(v,"").length,htmltags:t.length,idlist:f.sort(),idchecker:n,classlist:h.sort(),classchecker:r,scriptlist:s,imglist:p.sort(),linklist:g.sort(),cookies:d.cookie(),localstorage:N||{},_aixxhr:S}},ua:E})}var A;d.stack=A=function(t){var e=t||[],n=[];d.foreach(e,function(t){var e=d.isObject(t)?d.toarray(t):t||[],i=d.isFunction(e[0])?e[0]:d.NULL,r=d.isNumber(e[1])?e[1]:0,o=function(t){setTimeout(function(){var e=n.pop(),r=i.call(d.root,t);e&&e.call(d.root,r)},1e3*r)};n.push(o)}),d.define(this,"=",{value:n,writable:!0,enumerable:!1,configurable:!1})},d.extend(A.prototype,{noop:function(){return this["="]=[],this},fire:function(){return this["="].length&&this["="].pop().call(d.root)},add:function(){return this.push.apply(this,d.slice(arguments))},push:function(){var t=this,e=d.slice(arguments);d.foreach(e,function(e){if(!d.isFunction(e)&&!d.isArray(e))return console.error("add/push arguments error when assign to stack!");var n=d.isArray(e)?e[0]:e,i=d.isArray(e)?e[1]||0:parseFloat(e||0),r=function(e){setTimeout(function(){var i=t["="].pop(),r=n.call(d.root,e);i&&i.call(d.root,r)},1e3*i)};t["="].push(r)})}});var F;return d.hack=F=function(t,e){var n=this,i=t||[],r=i.length,o=new Array(r),a=[];d.define(this,{complete:{value:e||d.NULL,writable:!0,enumerable:!1,configurable:!1},"-":{value:a,writable:!0,enumerable:!1,configurable:!1}}),d.foreach(i,function(t,e){var i=e,r=d.isObject(t)?d.toarray(t):t||[],c=d.isFunction(r[0])?r[0]:d.NULL,s=d.isNumber(r[1])?r[1]:0,u=function(){setTimeout(function(){var t=c();o[i]=t||1,d.has(o)||(n.complete.apply(d.root,o),n.noop())},1e3*s)};a.push(u)})},d.extend(F.prototype,{noop:function(){return this["-"]=null,this.complete=null,this},fire:function(){return this["-"].length?d.foreach(this["-"],function(t){return t.call(d.root)}):0}}),d}),function(t,e){"function"==typeof define&&define.amd?define(e):t.__=e(_)}(this,function(t){"use strict";function e(){f||(f=!0,d.forEach(function(e,n){e.fn.call(t.root,e.ct)}),d=[])}function n(t){p.length>=v.config.limit&&p.shift(),p.push(t)}function i(e){return e.$el.every(function(e){return t.ua.browser.IE?document.body.contains(e):document.contains(e)})}function r(e){e=t.trim(e);var n=[],i=!L.test(e),o=!x.test(e);if(i&&o)if(e.search(",")>-1)t.foreach(e.split(","),function(t){n=n.concat(r(t))});else{if(g.test(e))return[document.getElementById(e.substr(1))];if(m.test(e))n=document.getElementsByClassName(e.substr(1));else if(b.test(e))n=document.getElementsByTagName(e);else{if(y.test(e)){var a=y.exec(e),c=a[1],s=a[2],u=a[3];return null==c?t.slice(document.getElementsByTagName("*")).filter(function(t){return t.getAttribute(s)===u}):r(c).filter(function(t){return t.getAttribute(s)===u})}if(w.test(e)){var l=document.createElement("i");return l.innerHTML=e,n=t.slice(l.childNodes),n.filter(function(t){return 1===t.nodeType})}n=document.querySelectorAll(e)}}else{if(w.test(e)){var l=document.createElement("i");return l.innerHTML=e,n=t.slice(l.childNodes),n.filter(function(t){return 1===t.nodeType})}n=document.querySelectorAll(e)}return t.slice(n)}function o(t){if(t.search("rgb")!=-1){var e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+c(e[1])+c(e[2])+c(e[3])}return t}function a(t){if(t.search("-")!=-1){for(var e=t.split("-"),n=1,i=e.length;n<i;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].slice(1);return e.join("")}return t}function c(t){return("0"+parseInt(t).toString(16)).slice(-2)}function s(t){if(null==t)return t;var e=t.nextSibling;return null!=e&&1===e.nodeType?e:s(e)}function u(t,e){if(null!=e){var n={};n.Events=function(t){for(var n in t)this[n]=t[n];this.data=e.data};var i=new n.Events(t);return delete n.Events,i}return t}function l(e,n,i,r){var o,a=t.isObject(r)?r:new CustomEvent(n,{data:i,bubbles:!0,cancelable:!0,target:e,toElement:e,srcElement:e,currentTarget:e});return t.isObject(r)&&(o={},o.data=i),u(a,o)}var f=!1,h=!1,d=[],p=[],v=function(n,r){if(t.isFunction(n))return f?setTimeout(function(){n(r)},0):(d.push({fn:n,ct:r}),"complete"===document.readyState?setTimeout(e,0):h||document.addEventListener("DOMContentLoaded",e,!1),void(h=!0));if(n instanceof E)return n;if(t.isString(n)){var o;if(p.forEach(function(t){t.$indicator===n&&(o=t)}),null!=o&&i(o))return t.clonedoom(o)}return new E(n)};v.config={limit:4,version:t.version};var g=/^#[^\s\=\+\.\#\[\]]+/i,m=/^\.[^\s\=\+\.\#\[\]]+$/i,b=/^[^\[\]\+\-\.#\s\=]+$/i,y=/([^\s]+)?\[([^\s]+)=["']?([^\s'"]+)["']?\]$/i,L=/[\s|\r]+/gim,x=/[>|\+|\~]+/gim,w=/<[a-z][\s\S]*>/i,E=function(e){this.$el=[],null!=e&&(t.isString(e)?(this.$el=r(e),this.$indicator=e):e!==document&&e!==t.root&&1!==e.nodeType||(this.$el.push(e),this.$indicator="")),this.length=this.$el.length,n(t.clonedoom(this))};v.fn=E.prototype={constructor:E,version:t.version,extend:function(e){t.extend(this,e)}},v.fn.extend({each:function(e,n){return t.foreach(this.$el,e,n),this},get:function(t){return this.$el[+t+(t<0?this.length:0)]},at:function(e){var n=t.clonedoom(this);return e=+e+(e<0?n.length:0),n.$el=[n.$el[e]],n.length=1,n},first:function(){return this.at(0)},last:function(){return this.at(-1)},compose:function(e){return null!=e&&(e instanceof E?this.$el=t.unique(this.$el.concat(e.$el||[])):t.isString(e)&&(this.$el=t.unique(this.$el.concat(v(e).$el)))),this.length=this.$el.length,this},by:function(e){var n=t.clonedoom(this);return n.$el=n.$el.filter(e),n.length=n.$el.length,n},even:function(){return this.by(function(t,e){return e%2!=0})},odd:function(){return this.by(function(t,e){return e%2==0})},next:function(e){var n=t.clonedoom(this),i=[],r=e?"previousElementSibling":"nextElementSibling";return t.foreach(n.$el,function(t){null!=t[r]&&i.push(t[r])}),n.$el=t.filter(i,function(t){return 3!==t.nodeType&&8!==t.nodeType&&"SCRIPT"!==t.nodeName}),n.length=n.$el.length,n},prev:function(t){return this.next(!t)},find:function(e){var n=t.clonedoom(this),i=[];return t.foreach(n.$el,function(n){i=t.slice(n.querySelectorAll(e)).concat(i)}),n.$el=i,n.length=n.$el.length,n},siblings:function(){var e=t.clonedoom(this),n=[],i=e.$el;return t.foreach(e.$el,function(e){n=t.slice(e.parentNode.children).concat(n)}),e.$el=t.filter(t.unique(n),function(e){return!t.has(i,e)}),e.length=e.$el.length,e},childrens:function(){var e=t.clonedoom(this),n=[];return t.foreach(e.$el,function(e){n=t.slice(e.children).concat(n)}),e.$el=t.unique(n),e.length=e.$el.length,e}});var S=["checked","disabled","readonly","required","validate"];v.fn.extend({addClass:function(e){return this.each(function(n){var i=n.getAttribute("class");i?(i=i.split(" "),n.setAttribute("class",t.unique(i.concat(e.split(" "))).join(" "))):n.setAttribute("class",t.unique(e.split(" ")).join(" "))})},removeClass:function(e){return this.each(function(n){var i=n.getAttribute("class");i&&(i=i.split(" "),t.foreach(e.split(" "),function(e){t.not(i,e)}),n.setAttribute("class",i.join(" ")))})},toggleClass:function(e){return this.each(function(n){var i=n.getAttribute("class");i?(i=i.split(" "),t.foreach(t.unique(e.split(" ")),function(e){t.has(i,e)?t.not(i,e):i.push(e)}),n.setAttribute("class",i.join(" "))):n.setAttribute("class",e)})},attr:function(){var e=t.slice(arguments);if(e.length){if(1===e.length)return this.get(0).getAttribute(e[0]);this.each(function(n){n.setAttribute(e[0],t.parseString(e[1]))})}return this},removeAttr:function(t){return this.each(function(e){e.removeAttribute(t)})},data:function(){var e=t.slice(arguments);return e[0]?(e[0]="data-"+e[0],this.attr.apply(this,e)):this},prop:function(){var e=t.slice(arguments);return e.length?1===e.length?t[t.has(S,e[0])?"isString":"cool"](this.attr(e[0])):e[1]!==!1&&0!==e[1]?this.attr(e[0],t.has(S,e[0])?"":e[1]):this.removeAttr(e[0]):this},removeProp:function(t){return this.removeAttr(t)},value:function(e){if(t.slice(arguments).length)return this.each(function(n){var i=n.tagName.toUpperCase();"SELECT"===i?t.foreach(t.slice(n.options),function(t){t.removeAttribute("selected"),(t.getAttribute("value")||t.innerText)===e+""&&t.setAttribute("selected","")}):n.setAttribute("value",e)});var n=this.get(0);return"SELECT"===n.tagName.toUpperCase()?n.options[n.selectedIndex].value||n.innerText:n.value||n.getAttribute("value")},text:function(e){return null!=e?this.each(function(t){t.innerText=e+""}):t.decodeHTML(this.get(0).innerText||"")},fill:function(e){if(null!=e){var n="";return e.nodeType&&1===e.nodeType?n=e.outerHTML:t.isObject(e)&&e instanceof E?e.each(function(t){n+=t.outerHTML}):n=e+"",this.each(function(t){null!=t&&(t.innerHTML=n+"")})}var i=this.get(0);return null!=i.innerHTML?i.innerHTML:""},html:function(){return this.fill.apply(this,t.slice(arguments))},replacewith:function(t){var e=v(t);return this.each(function(t){e.each(function(e){t.parentNode.insertBefore(e,t)}),t.parentNode.removeChild(t)}),e},insertbefore:function(t){var e=v(t);return this.each(function(t){e.each(function(e){t.parentNode.insertBefore(e,t)})})},insertafter:function(t){var e=v(t);return this.each(function(t){e.each(function(e){var n=s(t);null!=n?t.parentNode.insertBefore(e,n):t.parentNode.appendChild(e)})})},append:function(t){var e=v(t);return this.each(function(t){e.each(function(e){t.appendChild(e)})})},empty:function(){return this.each(function(t){t.innerHTML=""})},offset:function(){var t=0,e=0,n=0,i=0,r=this.get(0);for(n=r.offsetWidth,i=r.offsetHeight;r;)e+=r.offsetLeft,t+=r.offsetTop,r=r.offsetParent;return{top:t,left:e,witdh:n,height:i}},pos:function(){var t=this.get(0);return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}},draw:function(e,n){if(t.isString(e))return null==n?o(window.getComputedStyle(this.get(0),null)[e]):this.each(function(t){t.style[a(e)]=(n||"")+""});if(t.isObject(e))for(var i in e)this.draw(i,e[i]);return this},css:function(){return this.draw.apply(this,t.slice(arguments))},redraw:function(){return this.removeAttr("style")}});return v.fn.extend({reg:function(e,n,i,r){return this.each(function(o){if(null==o._events&&t.define(o,"_events",{value:{},writable:!0,enumerable:!1,configurable:!0}),null!=n){var a=function(t){n.call(i||o,t,e,i)};a.fn=n.fn||n,a.cal=n,null==o._events[e]&&(o._events[e]=[]),o._events[e].push(a),o.addEventListener(e,a,!!r)}})},purge:function(e,n){return this.each(function(i){t.isString(e)?null!=n?(null!=i._events[e]?(i.removeEventListener(e,t.cat(i._events[e],function(t){return t.fn===n})[0]||n),i._events[e].length||delete i._events[e]):i.removeEventListener(e,n),null!=i._events["_"+e]&&(document.documentElement.removeEventListener(e,t.cat(i._events["_"+e],function(t){return t.fn===n})[0].cal,!0),i._events["_"+e].length||delete i._events["_"+e])):(t.foreach(i._events[e],function(t){i.removeEventListener(e,t)}),t.foreach(i._events["_"+e],function(t){document.documentElement.removeEventListener(e,t.cal,!0)}),delete i._events["_"+e],delete i._events[e]):(t.foreach(i._events,function(e,n){n.search("_")!=-1?t.foreach(e,function(t){detectLive.removeEventListener(n.slice(1),t.cal,!0)}):t.foreach(e,function(t){i.removeEventListener(n,t)})}),i._events={})})},off:function(t,e,n){return this.purge(t,n)},on:function(){return this.live.apply(this,t.slice(arguments))},live:function(e,n,i,r,o){var a,c=!t.isFunction(n);return t.isFunction(i)||(a=i,i=t.isFunction(r)?r:t.NULL,r=o),this.each(function(o){if(c){var s=function(c){var s=c.target||c.toElement;if(t.has(v(o).find(n).$el,s))return i.call(r||s,l(s,e,a,c),e)};s.fn=i,s.elm=o,v(o).reg("_"+e,s,null),document.documentElement.addEventListener(e,s,!0)}else v(o).reg(e,n,i)})},signet:function(e,n){return null!=e?null!=n?this.each(function(i){i[e]?i.name=n:t.define(i,e,{value:n,writable:!0,enumerable:!1,configurable:!0})}):this.get(0)[e]:this},once:function(t,e){return this.each(function(n){var i=function(r){e.call(n,r,t),n.removeEventListener(t,i),i=null};n.addEventListener(t,i)})},dispatch:function(e,n){return this.each(function(i){var r=l(i,e);return t.isFunction(n)?n.call(i,r):i.dispatchEvent(r)})}}),v}),function(t,e){"function"==typeof define&&define.amd?define(e):t.aix=e(_,__)}(this,function(t,e){"use strict";function n(e){return function(){var n=t.clonedoom(this.data),i=[n].concat(t.slice(arguments));return n=t[e].apply(n,i),t.isequal(n,this.data)||(this.data=n,this.dispatch(e,null,i)),this}}function i(e){return function(){var n=t.clonedoom(this.data),i=[n].concat(t.slice(arguments));return t[e].apply(n,i)}}function r(e,n,i){t.foreach(this.routes,function(t,r){RegExp(r,"i").test(e)&&o.call(this,t,[i,e,n,r])},this)}function o(e,n){switch(t.typeof(e)){case"function":e.apply(this||t.root,n);break;default:t.foreach(t.isString(e)?e.split(","):e,function(e){this.action[e].apply(this||t.root,n)},this)}}var a={},c=0,s=0,u=0,l={el:"",template:""},f={routes:{},action:{}},h={data:""},d={data:[],model:0},p={get:"GET",put:"PUT",post:"POST",pull:"PULL",fetch:"FETCH",update:"UPDATE",delete:"DELETE"},v={get:"GET",put:"POST",post:"POST",pull:"POST",fetch:"GET",update:"POST",delete:"POST"},g=v;a.aixpref=function(){return{count:{views:c,models:s,collections:u}}},a.config={restful:!1},t.watch(a.config,"restful",function(t){return g=t?p:v,t}),a.model=function(e){var n=this;t.define(n,{aid:{value:"#"+ ++s,writable:!0,enumerable:!1},change:{value:!1,writable:!0,enumerable:!1}}),t.isObject(e.events)&&t.foreach(e.events,function(e,i){t.addEvent(n,i,e)}),t.isFunction(e.validate)&&t.define(n,"validate",{value:e.validate,writable:!1,enumerable:!1,configurable:!1}),delete e.validate,delete e.change,delete e.events,t.extend(n,t.extend(t.clone(h),e)),t.watch(n,"data",function(e,i){if(t.isFunction(n.validate)){var r=!0;return(t.isFunction(n.validate)?!n.validate.call(n,e):0)&&(r=!1),r?(t.isequal(e,i)||(t.dispatch(n,"change",null,[e,i]),n.change=!0),t.dispatch(n,"validate",null,[e,i]),t.dispatch(n,"validate:success",null,[e,i]),e):(t.dispatch(n,"validate",null,[e,i]),t.dispatch(n,"validate:fail",null,[e,i]),i)}return t.isequal(e,i)||(t.dispatch(n,"change",null,[e,i]),n.change=!0),e}),t.dispatch(n,"init")},a.model.extend=function(e){var n=function(n){var i=this,r=t.extend(t.clone(h),e),o=t.extend(r,n);t.isObject(o.events)&&t.foreach(o.events,function(e,n){t.addEvent(i,n,e)}),t.isFunction(o.validate)&&t.define(i,"validate",{value:o.validate,writable:!1,enumerable:!1,configurable:!1}),delete o.validate,delete o.change,delete o.events,t.compose(i,o),i.data=t.clone(this.data),t.define(i,{aid:{value:"#"+ ++s,writable:!0,enumerable:!1},change:{value:!1,writable:!0,enumerable:!1}}),t.watch(i,"data",function(e,n){if(t.isFunction(i.validate)){var r=!0;return(t.isFunction(i.validate)?!i.validate.call(i,e):0)&&(r=!1),r?(t.isequal(e,n)||(t.dispatch(i,"change",null,[e,n]),i.change=!0),t.dispatch(i,"validate",null,[e,n]),t.dispatch(i,"validate:success",null,[e,n]),e):(t.dispatch(i,"validate",null,[e,n]),t.dispatch(i,"validate:fail",null,[e,n]),n)}return t.isequal(e,n)||(t.dispatch(i,"change",null,[e,n]),i.change=!0),e}),t.dispatch(i,"init")};return t.compose(n.prototype,a.model.prototype),n.prototype.constructor=n,t.define(n,"base",{value:a.model,writable:!1,enumerable:!1,configurable:!1}),n},a.model.prototype={constructor:a.model,get:function(e){return t.isString(e)?t.clone(this.data[e]||""):t.clone(this.data)},set:function(){var e=t.slice(arguments);return e.length>1?this.data[e[0]]=e[1]:this.data=e[0],this},addEvent:function(e,n){return t.isFunction(n)&&t.addEvent(this,e,n),this},removeEvent:function(e,n){return t.removeEvent(this,e,n)},dispatch:function(e,n,i){return t.dispatch(this,e,t.isFunction(n)?n:null,i)},trigger:function(t,e,n){return this.dispatch(t,e,n)},listen:function(e,n){return t.isObject(this.data)&&t.watch(this.data,e,n),this},unlisten:function(e){return t.isObject(this.data)&&t.unwatch(this.data,e),this},add:function(){var e=t.slice(arguments),n=t.clonedoom(this.data),i=t.typeof(n);return t.foreach(e,function(e){switch(i){case"number":n+=t.isNumber(+e)?+e:0;break;case"string":n+=e.toString();break;case"array":n=n.concat(e);break;case"object":t.isObject(e)&&t.extend(n,e)}}),this.data=n,this.dispatch("add",null,e)},rev:function(){var e=t.slice(arguments),n=t.clonedoom(this.data),i=t.typeof(n);return t.foreach(e,function(e){switch(i){case"array":t.isArray(e)?t.foreach(e,function(e){t.not(n,e)}):t.not(n,e);break;case"object":t.isArray(e)?t.foreach(e,function(t){delete n[t]}):delete n[e]}}),this.data=n,this.dispatch("remove",null,e)}},a.collection=function(e){var n=this;t.define(n,{cid:{value:"#"+ ++u,writable:!0,enumerable:!1},change:{value:!1,writable:!0,enumerable:!1}}),t.isObject(e.events)&&t.foreach(e.events,function(e,i){t.addEvent(n,i,e)}),t.isFunction(e.validate)&&t.define(n,"validate",{value:e.validate,writable:!1,enumerable:!1,configurable:!1}),delete e.validate,
delete e.change,delete e.events,t.extend(n,t.extend(t.clone(d),e)),n.model&&(n.data=t.filter(n.data,function(t){return t.constructor===n.model})),t.watch(n,"data",function(e,i){if(t.isArray(e)||(e=[e]),t.isFunction(n.validate)){var r=!0;return t.foreach(e,function(e){(n.model?e.constructor!==n.model:0)&&(r=!1),(t.isFunction(n.validate)?!n.validate.call(n,e):0)&&(r=!1)}),r?(t.isequal(e,i)||(t.dispatch(n,"change",null,[e,i]),n.change=!0),t.dispatch(n,"validate",null,[e,i]),t.dispatch(n,"validate:success",null,[e,i]),e):(t.dispatch(n,"validate",null,[e,i]),t.dispatch(n,"validate:fail",null,[e,i]),i)}return t.isequal(e,i)||(t.dispatch(n,"change",null,[e,i]),n.change=!0),e}),t.dispatch(n,"init")},a.collection.extend=function(e){var n=function(n){var i=this,r=t.extend(t.clone(d),e),o=t.extend(r,n);t.isObject(o.events)&&t.foreach(o.events,function(e,n){t.addEvent(i,n,e)}),t.isFunction(o.validate)&&t.define(i,"validate",{value:o.validate,writable:!1,enumerable:!1,configurable:!1}),delete o.validate,delete o.change,delete o.events,t.compose(i,o),t.define(i,{aid:{value:"#"+ ++u,writable:!0,enumerable:!1},change:{value:!1,writable:!0,enumerable:!1}}),t.watch(i,"data",function(e,n){if(t.isArray(e)||(e=[e]),t.isFunction(i.validate)){var r=!0;return t.foreach(e,function(e){(i.model?e.constructor!==i.model:0)&&(r=!1),(t.isFunction(i.validate)?!i.validate.call(i,e):0)&&(r=!1)}),r?(t.isequal(e,n)||(t.dispatch(i,"change",null,[e,n]),i.change=!0),t.dispatch(i,"validate",null,[e,n]),t.dispatch(i,"validate:success",null,[e,n]),e):(t.dispatch(i,"validate",null,[e,n]),t.dispatch(i,"validate:fail",null,[e,n]),n)}return t.isequal(e,n)||(t.dispatch(i,"change",null,[e,n]),i.change=!0),e}),t.dispatch(i,"init")};return t.compose(n.prototype,a.collection.prototype),n.prototype.constructor=n,t.define(n,"base",{value:a.collection,writable:!1,enumerable:!1,configurable:!1}),n},a.collection.prototype={constructor:a.collection,addEvent:function(e,n){return t.isFunction(n)&&t.addEvent(this,e,n),this},removeEvent:function(e,n){return t.removeEvent(this,e,n)},listen:function(e,n){return t.isObject(this.data)&&t.watch(this.data,e,n),this},unlisten:function(e){return t.isObject(this.data)&&t.unwatch(this.data,e),this},add:function(){var e=this.data.length,n=t.slice(arguments),i=t.slice(this.data);return n.length&&(i=i.concat.apply(i,n)),t.isequal(this.data,i)?this:(this.data=i,this.data.length===e?this:this.dispatch("add",null,n))},rev:function(e){var n,i=this.data.length;return t.isString(e)?(n=t.slice(this.data),n=t.cat(n,function(t){return t.aid!=="#"+e})):t.isObject(e)&&(t.isFunction(this.model)?e instanceof this.model&&(n=t.slice(this.data),n=t.not(n,e)):(n=t.slice(this.data),n=t.not(n,e))),n?(this.data=n,this.data.length===i?this:this.dispatch("remove",null,[e])):this},get:function(e){return t.isString(e)?t.filter(this.data,function(t){return t.aid==="#"+e}):t.slice(this.data)},set:function(e){return this.data=t.isArray(e)?e:[e],this},dispatch:function(e,n,i){return t.dispatch(this,e,t.isFunction(n)?n:null,i)},trigger:function(t,e,n){return this.dispatch(t,e,n)}},t.foreach(["foreach","splice","sort","unique","reject","filter","map","find","cat","groupby","toarray","forarray","pairs","not","bale","pluck","reverse","shuffle","merge"],function(t){a.model.prototype[t]=n(t),a.collection.prototype[t]=n(t)}),t.foreach(["keys","clone","contain","has","isequal","requery","typeof","combom"],function(t){a.model.prototype[t]=i(t),a.collection.prototype[t]=i(t)}),t.extend(a.model.prototype,{toJSON:function(){return t.isArray(this.data)||t.isObject(this.data)?JSON.stringify(this.data):this.data},parse:function(){return t.isString(this.data)?JSON.parse(this.data):t.clone(this.data)},pipe:function(e,n,i,r,o){var a,c,s=this,u={type:g[e.toLowerCase()],aysnc:!0},l=t.isFunction(i);t.isString(n)?(u.url=n,u.param=l?{}:i||{},a=l?i:r||t.NULL,c=l?r||t.NULL:o||t.NULL):t.isObject(n)?(u.url=s.url||"/",u.param=l?n:i||{},a=l?i:r||t.NULL,c=l?r||t.NULL:o||t.NULL):(u.url=s.url||"/",a=t.NULL,c=t.NULL),u.success=function(t,n,i){a.call(s,t,n,i),s.dispatch(e+":success",null,[t,n,i])},u.fail=function(t,n){c.call(s,t,n),s.dispatch(e+":fail",null,[t,n])};var f=t.aix(u);return this.dispatch(e,null,[f])},aget:function(e,n,i,r){return i=t.isFunction(i)?i:t.NULL,r=t.isFunction(r)?r:t.NULL,this.pipe.apply(this,["get",e||this.url||"",n,i,r])},fetch:function(e,n,i){return n=t.isFunction(n)?n:t.NULL,i=t.isFunction(i)?i:t.NULL,this.pipe.apply(this,["fetch",this.url||"",e,function(t,e,i){this.data=JSON.parse(t),n.call(this,t,e,i)},i])},pull:function(){return this.fetch.apply(this,t.slice(arguments))},post:function(e,n,i,r){return i=t.isFunction(i)?i:t.NULL,r=t.isFunction(r)?r:t.NULL,this.pipe.apply(this,["post",e||this.url||"",n||this.parse(),i,r])}}),t.extend(a.collection.prototype,{toJSON:function(){var e=[];return t.foreach(this.data,function(t){e.push(t.get?t.get():t)}),JSON.stringify(e)},parse:function(){return JSON.parse(this.toJSON())},pipe:function(e,n,i,r,o){var a,c,s=this,u={type:g[e.toLowerCase()],aysnc:!0},l=t.isFunction(i);t.isString(n)?(u.url=n,u.param=l?{}:i||{},a=l?i:r||t.NULL,c=l?r||t.NULL:o||t.NULL):t.isObject(n)?(u.url=s.url||"/",u.param=l?n:i||{},a=l?i:r||t.NULL,c=l?r||t.NULL:o||t.NULL):(u.url=s.url||"/",a=t.NULL,c=t.NULL),u.success=function(t,n,i){a.call(s,t,n,i),s.dispatch(e+":success",null,[t,n,i])},u.fail=function(t,n){c.call(s,t,n),s.dispatch(e+":fail",null,[t,n])};var f=t.aix(u);return this.dispatch(e,null,[f])},aget:function(e,n,i,r){return i=t.isFunction(i)?i:t.NULL,r=t.isFunction(r)?r:t.NULL,this.pipe.apply(this,["get",e||this.url||"",n,i,r])},fetch:function(e,n,i){return n=t.isFunction(n)?n:t.NULL,i=t.isFunction(i)?i:t.NULL,this.pipe.apply(this,["fetch",this.url||"",e,function(e,i,r){var o=this;o.data=JSON.parse(e),o.model&&t.foreach(data,function(t,e){data[e]=new o.model({data:t})}),o.data=data,n.call(this,e,i,r)},i])},pull:function(){return this.fetch.apply(this,t.slice(arguments))},post:function(e,n,i,r){return i=t.isFunction(i)?i:t.NULL,r=t.isFunction(r)?r:t.NULL,this.pipe.apply(this,["post",e||this.url||"",n||this.parse(),i,r])}}),e=e||t.NULL,a.view=function(n){if(n=n||{},!t.isString(n.el))return console.error("view must define its 'el' prop bind with elm (custom string)");var i=this;return t.define(i,{vid:{value:"#"+ ++c,writable:!0,enumerable:!1}}),t.isObject(n.events)&&t.foreach(n.events,function(r,o){var a=o.split(":");a.length>1?e(n.el).on(a[0],a[1],{self:i},r):t.addEvent(i,o,r)}),n.template&&!t.isString(n.template)||(n.template=t.isFunction(n.build)?n.build.call(i,n.template||""):t.doom(n.template||"")),n.render&&t.isFunction(n.render)||(n.render=function(t){return e(this.el).html(this.template(t))&&this}),delete n.change,delete n.events,t.isString(n.url)?(t.aix({url:n.url,cache:!t.isBoolean(n.cache)||n.cache,success:function(e){n.template=t.isFunction(n.build)?n.build.call(i,e):t.doom(e),t.extend(i,t.extend(t.clone(l),n)),t.dispatch(i,"init")},fail:function(t){console.error("Fetch template url->["+n.url+"] has fail!"),console.log(t)}}),this):(t.extend(i,t.extend(t.clone(l),n)),void t.dispatch(i,"init"))},a.view.prototype={addEvent:function(n,i){var r=n.split(":");return r.length>1?e(this.el).on(r[0],r[1],{self:this},i):t.addEvent(this,n,i),this},removeEvent:function(n,i){var r=n.split(":");r.length>1?e(this.el).off(r[0],r[1],i):t.removeEvent(this,n,i)},dispatch:function(e,n,i){return t.dispatch(this,e,t.isFunction(n)?n:null,i)}},a.view.extend=function(n){var i=function(i){if(n=n||{},!t.isString(n.el))return console.error("view must define its 'el' prop bind with dom elm");var r=this,o=t.extend(t.clone(l),n),a=t.extend(o,i);return t.define(r,{vid:{value:"#"+ ++c,writable:!0,enumerable:!1}}),t.isObject(a.events)&&t.foreach(a.events,function(n,i){var o=i.split(":");o.length>1?e(a.el).on(o[0],o[1],{self:r},n):t.addEvent(r,i,n)}),a.template&&!t.isString(a.template)||(a.template=t.isFunction(a.build)?a.build.call(r,a.template||""):t.doom(a.template||"")),a.render&&t.isFunction(a.render)||(a.render=function(t){return e(this.el).html(this.template(t))&&this}),delete a.change,delete a.events,t.isString(a.url)?(t.aix({url:a.url,cache:!t.isBoolean(a.cache)||a.cache,success:function(e){a.template=t.isFunction(a.build)?a.build.call(r,e):t.doom(e),t.extend(r,t.extend(t.clone(l),a)),t.dispatch(r,"init")},fail:function(t){console.error("Fetch template url->[ "+a.url+" ] has fail!"),console.log(t)}}),this):(t.extend(r,t.extend(t.clone(l),a)),void t.dispatch(r,"init"))};return t.compose(i.prototype,a.view.prototype),i.prototype.constructor=i,t.define(i,"base",{value:a.view,writable:!1,enumerable:!1,configurable:!1}),i};var m=a.getHash=function(t){var e=t.search("#");return e>0?t.slice(e+1):""};return a.route=function(e){e=e||{};var n=this;this.storage=t.root.localStorage||{},t.isObject(e.events)&&t.foreach(e.events,function(e,i){t.addEvent(n,i,e)}),delete e.events,t.extend(n,t.extend(t.clone(f),e)),t.addEvent(n,"hashchange",r),t.define(this,{history:{value:{old:"",now:""},writable:!0,enumerable:!1},rid:{value:"ai-route-"+Math.random(),writable:!1,enumerable:!1,configurable:!1},event:{value:function(e){return e.newURL===e.oldURL?e.preventDefault():(n.history.now=e.newURL,n.history.old=e.oldURL,void t.dispatch(n,"hashchange",null,[m(e.newURL),m(e.oldURL),e]))},writable:!1,enumerable:!1,configurable:!1}}),t.dispatch(n,"init")},a.route.prototype={constructor:a.route,dispatch:function(e,n,i){return t.dispatch(this,e,n,i)},listen:function(){return this.$listen||(t.define(this,"$listen",{value:1,writable:!1,enumerable:!1,configurable:!0}),t.root.addEventListener("hashchange",this.event),this.dispatch("listen"),this.dispatch("hashchange",null,[m(window.location.href)])),this},stop:function(){return delete this.$listen&&(t.root.removeEventListener("hashchange",this.event),this.dispatch("stop")),this},assign:function(e){if(this.$listen){var n=t.root.location.href,i=n.search("#");i>0&&(n=n.slice(0,i)),t.root.location.href=n+("#"===e.slice(0,1)?"":"#")+e}return this},addhash:function(e){var n=t.root.location.href+(e||"");return n!==t.root.location.href&&(t.root.location.href=n),this},save:function(){return this.storage.setItem(this.rid,JSON.stringify(this.history)),this}},a});